# Mydia Environment Configuration
# ================================
# Copy this file to .env and fill in your values
#
# Configuration Precedence:
#   1. Environment variables (highest priority)
#   2. config/config.yml
#   3. Application defaults (lowest priority)

# Server Configuration
# --------------------
# Port the web server listens on
PORT=4000

# Host interface to bind to (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
HOST=0.0.0.0

# Public URL scheme (http or https)
URL_SCHEME=https

# Public hostname for the application
URL_HOST=mydia.example.com
# PHX_HOST=mydia.example.com  # Alternative to URL_HOST

# Application Secrets
# -------------------
# Secret key base for signing cookies and sessions
# Generate with: mix phx.gen.secret
SECRET_KEY_BASE=your-secret-key-here-change-this-in-production

# Guardian JWT secret key for API authentication
# Generate with: mix guardian.gen.secret
GUARDIAN_SECRET_KEY=your-guardian-secret-key-change-this-in-production

# Database Configuration
# ----------------------
# SQLite database file path (default: /config/mydia.db in Docker, mydia_dev.db locally)
DATABASE_PATH=/config/mydia.db

# Database connection pool size
POOL_SIZE=5

# Query timeout in milliseconds
# DATABASE_TIMEOUT=5000

# SQLite cache size in KB (negative means KB, positive means pages)
SQLITE_CACHE_SIZE=-64000

# SQLite busy timeout in milliseconds
SQLITE_BUSY_TIMEOUT=5000

# SQLite journal mode (delete, truncate, persist, memory, wal)
# SQLITE_JOURNAL_MODE=wal

# SQLite synchronous mode (off, normal, full, extra)
# SQLITE_SYNCHRONOUS=normal

# Metadata Provider Configuration
# --------------------------------
# URL for the self-hosted metadata relay service
# Defaults to https://metadata-relay.fly.dev if not set
# METADATA_RELAY_URL=https://metadata-relay.fly.dev

# Authentication Configuration
# ----------------------------
# Enable local username/password authentication
LOCAL_AUTH_ENABLED=true

# Enable OIDC (OpenID Connect) authentication
OIDC_ENABLED=false

# OIDC issuer URL (e.g., https://auth.example.com/realms/myrealm)
OIDC_ISSUER=https://auth.example.com/realms/myrealm

# OIDC discovery document URI (alternative to OIDC_ISSUER)
# OIDC_DISCOVERY_DOCUMENT_URI=https://auth.example.com/.well-known/openid-configuration

# OIDC client credentials
OIDC_CLIENT_ID=mydia
OIDC_CLIENT_SECRET=your-oidc-client-secret

# OIDC redirect URI (defaults to {URL_SCHEME}://{URL_HOST}/auth/oidc/callback)
# OIDC_REDIRECT_URI=https://mydia.example.com/auth/oidc/callback

# OIDC scopes to request
# OIDC_SCOPES=openid profile email

# JWT token time-to-live in days
# JWT_TTL_DAYS=30

# JWT allowed clock drift in milliseconds
# JWT_ALLOWED_DRIFT=2000

# Media Library Configuration
# ---------------------------
# Legacy simple configuration (backward compatible):
# Path to movies library
MOVIES_PATH=/media/movies

# Path to TV shows library
TV_PATH=/media/tv

# How often to scan the media library (in hours)
# MEDIA_SCAN_INTERVAL_HOURS=1

# Automatically trigger search & download when adding media to library
# When true: Adding a movie/show automatically queues a search job
# When false: Requires manual "Auto Search & Download" button click
# AUTO_SEARCH_ON_ADD=true

# Enable monitoring by default when adding media to library
# When true: New items are monitored automatically
# When false: New items are not monitored (manual enable required)
# MONITOR_BY_DEFAULT=true

# Advanced Library Paths Configuration
# -------------------------------------
# Configure multiple library paths using numbered environment variables.
# Use the format LIBRARY_PATH_<N>_<FIELD> where N is 1, 2, 3, etc.
# These will be merged with any library_paths defined in config.yml and the
# legacy MOVIES_PATH/TV_PATH variables above.
#
# Available fields:
#   - PATH (required): Filesystem path to the library
#   - TYPE (required): Library type (movies, series, or mixed)
#   - MONITORED (optional): Enable/disable monitoring (true/false, default: true)
#   - SCAN_INTERVAL (optional): Scan interval in seconds (default: 3600)
#   - QUALITY_PROFILE_ID (optional): ID of quality profile to assign
#
# Example: Movies library
# LIBRARY_PATH_1_PATH=/media/movies
# LIBRARY_PATH_1_TYPE=movies
# LIBRARY_PATH_1_MONITORED=true
# LIBRARY_PATH_1_SCAN_INTERVAL=3600
# LIBRARY_PATH_1_QUALITY_PROFILE_ID=1
#
# Example: TV shows library
# LIBRARY_PATH_2_PATH=/media/tv-shows
# LIBRARY_PATH_2_TYPE=series
# LIBRARY_PATH_2_MONITORED=true
# LIBRARY_PATH_2_SCAN_INTERVAL=3600
#
# Example: 4K Movies library (not monitored)
# LIBRARY_PATH_3_PATH=/media/movies-4k
# LIBRARY_PATH_3_TYPE=movies
# LIBRARY_PATH_3_MONITORED=false
# LIBRARY_PATH_3_SCAN_INTERVAL=7200
# LIBRARY_PATH_3_QUALITY_PROFILE_ID=2

# Download Configuration
# ----------------------
# How often to monitor downloads for completion (in minutes)
# DOWNLOAD_MONITOR_INTERVAL_MINUTES=2

# Download Client Configuration
# ------------------------------
# Configure download clients using numbered environment variables.
# Use the format DOWNLOAD_CLIENT_<N>_<FIELD> where N is 1, 2, 3, etc.
# These will be merged with any clients defined in config.yml.
#
# Example: qBittorrent client
# DOWNLOAD_CLIENT_1_NAME=qBittorrent
# DOWNLOAD_CLIENT_1_TYPE=qbittorrent
# DOWNLOAD_CLIENT_1_ENABLED=true
# DOWNLOAD_CLIENT_1_PRIORITY=1
# DOWNLOAD_CLIENT_1_HOST=localhost
# DOWNLOAD_CLIENT_1_PORT=8080
# DOWNLOAD_CLIENT_1_USE_SSL=false
# DOWNLOAD_CLIENT_1_URL_BASE=
# DOWNLOAD_CLIENT_1_USERNAME=admin
# DOWNLOAD_CLIENT_1_PASSWORD=adminpass
# DOWNLOAD_CLIENT_1_CATEGORY=mydia
# DOWNLOAD_CLIENT_1_DOWNLOAD_DIRECTORY=/downloads/complete
#
# Example: Transmission client
# DOWNLOAD_CLIENT_2_NAME=Transmission
# DOWNLOAD_CLIENT_2_TYPE=transmission
# DOWNLOAD_CLIENT_2_ENABLED=true
# DOWNLOAD_CLIENT_2_PRIORITY=2
# DOWNLOAD_CLIENT_2_HOST=localhost
# DOWNLOAD_CLIENT_2_PORT=9091
# DOWNLOAD_CLIENT_2_USE_SSL=false
# DOWNLOAD_CLIENT_2_URL_BASE=/transmission
# DOWNLOAD_CLIENT_2_USERNAME=transmission
# DOWNLOAD_CLIENT_2_PASSWORD=transmission
# DOWNLOAD_CLIENT_2_DOWNLOAD_DIRECTORY=/downloads

# Indexer Configuration (optional, can also be set via web UI)
# PROWLARR_URL=http://prowlarr:9696
# PROWLARR_API_KEY=your-prowlarr-api-key

# Logging Configuration
# ---------------------
# Log level (debug, info, warning, error)
LOG_LEVEL=info

# Oban (Background Jobs) Configuration
# ------------------------------------
# How often to poll for jobs (in milliseconds)
# OBAN_POLL_INTERVAL=1000

# How long to keep completed jobs (in days)
# OBAN_MAX_AGE_DAYS=7

# Container Configuration (LinuxServer.io standards)
# -----------------------------------------------------
# User ID for file ownership/permissions (use 'id' command to find yours)
PUID=1000

# Group ID for file ownership/permissions (use 'id' command to find yours)
PGID=1000

# Timezone (e.g., America/New_York, Europe/London)
TZ=UTC

# System Configuration
# --------------------
# Force loading of runtime config in dev/test (optional)
# LOAD_RUNTIME_CONFIG=true
